name: SERVEO-PUTTY-BAGLANTISI

on:
  workflow_dispatch:

jobs:
  terminal-ac:
    runs-on: ubuntu-latest
    steps:
      - name: Sifre ve SSH Ayarla
        run: |
          echo "runner:123456" | sudo chpasswd
          sudo sed -i 's/PasswordAuthentication no/PasswordAuthentication yes/' /etc/ssh/sshd_config
          sudo service ssh restart

      - name: Serveo Baglantisi Kur (Ozel Isimli)
        run: |
          # 'poyraz' ismini almaya calisiyoruz, doluysa rastgele verir
          ssh -o StrictHostKeyChecking=no -R poyraz:22:localhost:22 serveo.net > serveo.log 2>&1 &
          sleep 10
          cat serveo.log # Adresi loglarda gÃ¶rmek iÃ§in
          
      - name: Adresi Ekrana Bas
        run: |
          echo "--------------------------------------------------"
          echo "ðŸ‘‡ðŸ‘‡ PUTTY ADRESIN BURADA ðŸ‘‡ðŸ‘‡"
          grep -o '[a-zA-Z0-9.-]*\.serveo\.net' serveo.log || echo "Adres alinmadi, logu kontrol et."
          echo "Kullanici: runner | Sifre: 123456 | Port: 22"
          echo "--------------------------------------------------"
          
      - name: Bekle
        run: sleep 21600
